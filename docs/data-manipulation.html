<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Data Manipulation | R Course</title>
  <meta name="description" content="Chapter 4 Data Manipulation | R Course" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Data Manipulation | R Course" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Data Manipulation | R Course" />
  
  
  

<meta name="author" content="YOUR NAME HERE" />


<meta name="date" content="2024-08-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-importing-and-exporting.html"/>
<link rel="next" href="data-visualization.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">SHORT TITLE HERE</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction to R and Basic Programming Concepts</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#overview-of-r-programming"><i class="fa fa-check"></i><b>1.1</b> Overview of R Programming</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#introduction-to-r"><i class="fa fa-check"></i><b>1.1.1</b> Introduction to R</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#importance-of-r-in-data-analysis"><i class="fa fa-check"></i><b>1.1.2</b> Importance of R in Data Analysis</a></li>
<li class="chapter" data-level="1.1.3" data-path="index.html"><a href="index.html#application-of-r-in-various-industries"><i class="fa fa-check"></i><b>1.1.3</b> Application of R in Various Industries</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#introduction-to-the-r-ecosystem"><i class="fa fa-check"></i><b>1.2</b> Introduction to the R ecosystem</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#r-studio"><i class="fa fa-check"></i><b>1.2.1</b> R Studio</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#cran"><i class="fa fa-check"></i><b>1.2.2</b> CRAN</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#setting-up-r-environment"><i class="fa fa-check"></i><b>1.3</b> Setting Up R Environment</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#installation-of-r-and-rstudio"><i class="fa fa-check"></i><b>1.3.1</b> Installation of R and RStudio</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#introduction-to-rstudio-interface"><i class="fa fa-check"></i><b>1.3.2</b> Introduction to RStudio Interface</a></li>
<li class="chapter" data-level="1.3.3" data-path="index.html"><a href="index.html#basic-r-syntax-and-commands"><i class="fa fa-check"></i><b>1.3.3</b> Basic R Syntax and Commands</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#hands-on-exercise"><i class="fa fa-check"></i><b>1.4</b> Hands-on Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basic-data-types-and-structures.html"><a href="basic-data-types-and-structures.html"><i class="fa fa-check"></i><b>2</b> Basic Data Types and Structures</a></li>
<li class="chapter" data-level="3" data-path="data-importing-and-exporting.html"><a href="data-importing-and-exporting.html"><i class="fa fa-check"></i><b>3</b> Data Importing and Exporting</a></li>
<li class="chapter" data-level="4" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>4</b> Data Manipulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#basic-data-manipulation"><i class="fa fa-check"></i><b>4.1</b> Basic Data Manipulation</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-manipulation.html"><a href="data-manipulation.html#introduction-to-data-manipulation"><i class="fa fa-check"></i><b>4.1.1</b> Introduction to Data Manipulation</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-manipulation.html"><a href="data-manipulation.html#subsetting-and-filtering-data"><i class="fa fa-check"></i><b>4.1.2</b> Subsetting and Filtering Data:</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#data-manipulation-with-dplyr"><i class="fa fa-check"></i><b>4.2</b> Data Manipulation with Dplyr</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-manipulation.html"><a href="data-manipulation.html#introduction-to-dplyr-package"><i class="fa fa-check"></i><b>4.2.1</b> Introduction to Dplyr package</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>5</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-visualization.html"><a href="data-visualization.html#basic-data-visualization"><i class="fa fa-check"></i><b>5.1</b> Basic Data Visualization</a></li>
<li class="chapter" data-level="5.2" data-path="data-visualization.html"><a href="data-visualization.html#advanced-data-visualization"><i class="fa fa-check"></i><b>5.2</b> Advanced Data Visualization</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="explanatory-data-analysis.html"><a href="explanatory-data-analysis.html"><i class="fa fa-check"></i><b>6</b> Explanatory Data Analysis</a></li>
<li class="chapter" data-level="7" data-path="statistical-analysis.html"><a href="statistical-analysis.html"><i class="fa fa-check"></i><b>7</b> Statistical Analysis</a>
<ul>
<li class="chapter" data-level="7.1" data-path="statistical-analysis.html"><a href="statistical-analysis.html#basic-concepts"><i class="fa fa-check"></i><b>7.1</b> Basic Concepts</a></li>
<li class="chapter" data-level="7.2" data-path="statistical-analysis.html"><a href="statistical-analysis.html#correlation-and-regression-analysis"><i class="fa fa-check"></i><b>7.2</b> Correlation and Regression Analysis</a></li>
<li class="chapter" data-level="7.3" data-path="statistical-analysis.html"><a href="statistical-analysis.html#advanced-statistical-methods"><i class="fa fa-check"></i><b>7.3</b> Advanced Statistical Methods</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Course</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-manipulation" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Data Manipulation<a href="data-manipulation.html#data-manipulation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="basic-data-manipulation" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Basic Data Manipulation<a href="data-manipulation.html#basic-data-manipulation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Sorting Data:</p>
<ul>
<li>Explanation of sorting data in R using order() and sort() functions.</li>
<li>Demonstration of sorting data frames by one or more columns.</li>
</ul>
<p>Basic Data Cleaning Techniques:</p>
<ul>
<li>Overview of common data cleaning tasks (e.g., handling missing data, removing duplicates).</li>
<li>Demonstration of how to detect and manage missing values using is.na() and na.omit() functions.</li>
</ul>
<div id="introduction-to-data-manipulation" class="section level3 hasAnchor" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Introduction to Data Manipulation<a href="data-manipulation.html#introduction-to-data-manipulation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Data Manipulation is the adjusting, organizing and transforming of the raw data is not a more useful and suitable format for data analysis. These are some of the reasons that make data manipulation mandatory in the data analysis process;</p>
<ol style="list-style-type: decimal">
<li><p><strong>Improves the data quality</strong><br />
Raw data may be incomplete, messy, containing irrelevant information, errors ,or duplicates that need to be cleaned and rectified. This will ensure the data is reliable thereby preventing incorrect conclusions or decisions.</p></li>
<li><p><strong>Making Data Usable</strong>
Sometimes data is collected from different sources that is not ready for analysis. Data Manipulation will transform the data into a structured and consistent format for easy analysis.</p></li>
<li><p><strong>Enhancing Data Exploration</strong><br />
By cleaning the data, analysts explore the data thereby understanding different concepts of the data.</p></li>
<li><p><strong>Enabling Complex Analysis</strong><br />
Some types of analysis require data to be in specific format or structure, for instance the time series analysis require data to be sorted out by date.</p></li>
<li><p><strong>Supporting Decision Making</strong><br />
Data Manipulation ensures that the data that is fed into the system is timely, accurate and reliable for informed decision-making models and relevant reports
<br></p></li>
</ol>
<p>These are the key tasks in the data manipulation;</p>
<ul>
<li><strong>Cleaning</strong>: by removing inaccurate and incomplete data entries.</li>
<li><strong>Filtering</strong> the data by selecting certain rows or columns based on a certain criteria.</li>
<li><strong>Reshaping</strong>: Changing the structure of the data for instance pivoting.</li>
<li><strong>Merging</strong>: Combine multiple data sets into one.</li>
<li><strong>Transforming</strong>: Modify existing data by mathematical or logical operations.</li>
<li><strong>Aggregation</strong>: Summarizing the data by performing operations like sum,average and count.</li>
</ul>
</div>
<div id="subsetting-and-filtering-data" class="section level3 hasAnchor" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Subsetting and Filtering Data:<a href="data-manipulation.html#subsetting-and-filtering-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Subsetting</strong> is a data management strategy that involves creating a coherent slice data from different data set for specific use cases. This topic will better be explained practically, therefore we will use the titanic data set. The data set contains information about the passengers on the Titanic, including their age, gender, passenger class, whether they survived and other details. Since the titanic dataset is absent in baseR, the <code>titanic</code> library will be installed by;</p>
<pre><code>install.packages(&quot;titanic&quot;)</code></pre>
<p>load the library</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data-manipulation.html#cb21-1" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;titanic&quot;</span>)</span></code></pre></div>
<p>The data set will indexed using different indexing techniques such as indexing of a single element, row and column indexing.</p>
<p>First we load the data set and view the first few records before indexing</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data-manipulation.html#cb22-1" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;titanic_train&quot;</span>)</span>
<span id="cb22-2"><a href="data-manipulation.html#cb22-2" tabindex="-1"></a></span>
<span id="cb22-3"><a href="data-manipulation.html#cb22-3" tabindex="-1"></a>titanic <span class="ot">&lt;-</span> titanic_train </span>
<span id="cb22-4"><a href="data-manipulation.html#cb22-4" tabindex="-1"></a><span class="fu">head</span>(titanic) <span class="co"># view the first few rows of the titanic data set</span></span></code></pre></div>
<pre><code>##   PassengerId Survived Pclass
## 1           1        0      3
## 2           2        1      1
## 3           3        1      3
## 4           4        1      1
## 5           5        0      3
## 6           6        0      3
##                                                  Name    Sex Age SibSp Parch
## 1                             Braund, Mr. Owen Harris   male  22     1     0
## 2 Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0
## 3                              Heikkinen, Miss. Laina female  26     0     0
## 4        Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0
## 5                            Allen, Mr. William Henry   male  35     0     0
## 6                                    Moran, Mr. James   male  NA     0     0
##             Ticket    Fare Cabin Embarked
## 1        A/5 21171  7.2500              S
## 2         PC 17599 71.2833   C85        C
## 3 STON/O2. 3101282  7.9250              S
## 4           113803 53.1000  C123        S
## 5           373450  8.0500              S
## 6           330877  8.4583              Q</code></pre>
<ol style="list-style-type: decimal">
<li><strong>Extract a row</strong>
When subsetting to extract data for a single row the square brackets <code>[ ]</code> will be used with the position of the index you want to extract. Lets extract all the information of the 10th passenger.</li>
</ol>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="data-manipulation.html#cb24-1" tabindex="-1"></a>titanic[<span class="dv">10</span>, ] <span class="co"># note the comma after the index 10</span></span></code></pre></div>
<pre><code>##    PassengerId Survived Pclass                                Name    Sex Age
## 10          10        1      2 Nasser, Mrs. Nicholas (Adele Achem) female  14
##    SibSp Parch Ticket    Fare Cabin Embarked
## 10     1     0 237736 30.0708              C</code></pre>
<p>Also, more indices can be subsetted in the format <code>[i:j, ]</code> where the <code>i</code> is the starting index while <code>j</code> is the ending index respectively. Lets extract the information by subsetting the titanic data from index 7 to 10.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data-manipulation.html#cb26-1" tabindex="-1"></a>titanic[<span class="dv">7</span><span class="sc">:</span><span class="dv">10</span>, ]</span></code></pre></div>
<pre><code>##    PassengerId Survived Pclass
## 7            7        0      1
## 8            8        0      3
## 9            9        1      3
## 10          10        1      2
##                                                 Name    Sex Age SibSp Parch
## 7                            McCarthy, Mr. Timothy J   male  54     0     0
## 8                     Palsson, Master. Gosta Leonard   male   2     3     1
## 9  Johnson, Mrs. Oscar W (Elisabeth Vilhelmina Berg) female  27     0     2
## 10               Nasser, Mrs. Nicholas (Adele Achem) female  14     1     0
##    Ticket    Fare Cabin Embarked
## 7   17463 51.8625   E46        S
## 8  349909 21.0750              S
## 9  347742 11.1333              S
## 10 237736 30.0708              C</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><strong>Extract a column</strong><br />
When subsetting to extract data for a single column the square brackets <code>[ ]</code> will be used as before, with the position of the index or column name you want to extract. Lets extract all the information of the column <code>Name</code>.</li>
</ol>
<pre><code>titanic[, &quot;Name&quot;] # note the comma before &quot;Name&quot;</code></pre>
<p><img src="images/dataset_images/titanic_names.png" /></p>
<p>An index of the column can be used in place of the column name. For instance, the column, “PassengerId” is the first column therefore its index will be <code>1</code>. Lets subset the column by calling the index.</p>
<pre><code>titanic[, 1] # note the comma before the column index</code></pre>
<p><img src="images/dataset_images/titanic_passengers_id.png" /></p>
<ol start="3" style="list-style-type: decimal">
<li><strong>Extracting a single element</strong><br />
A single element that has a defined position in a data frame, both the row index and the column name/index are called.</li>
</ol>
<pre><code>dataframe[row_index, column index/name]</code></pre>
<p>Lets extract the age of the Name of the fifth passenger.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data-manipulation.html#cb31-1" tabindex="-1"></a>titanic[<span class="dv">5</span>, <span class="st">&quot;Name&quot;</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Allen, Mr. William Henry&quot;</code></pre>
<p>Instead of using the column name. Lets use the column index. In the above context, the column “Name” appears at index(is the fourth column).</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data-manipulation.html#cb33-1" tabindex="-1"></a>titanic[<span class="dv">5</span>, <span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Allen, Mr. William Henry&quot;</code></pre>
<p>Subsetting a data set can be done by <strong>filtering</strong> data based on logical conditions to extract rows that meet certain criteria. They involve comparisons operators such as <code>&gt;, &lt;, ==, !=</code> or logical operators like <code>&amp;</code>(and), <code>|</code>(or), <code>!</code> (not).</p>
<p>In this titanic data set we:-</p>
<ol style="list-style-type: decimal">
<li><strong>Filter based on a single condition</strong>
Lets find the passengers who survived on the titanic.</li>
</ol>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data-manipulation.html#cb35-1" tabindex="-1"></a>survivors <span class="ot">&lt;-</span> titanic[titanic<span class="sc">$</span>Survived <span class="sc">==</span> <span class="dv">1</span>, ]</span>
<span id="cb35-2"><a href="data-manipulation.html#cb35-2" tabindex="-1"></a><span class="fu">head</span>(survivors) <span class="co"># view the first few rows of survivors</span></span></code></pre></div>
<pre><code>##    PassengerId Survived Pclass
## 2            2        1      1
## 3            3        1      3
## 4            4        1      1
## 9            9        1      3
## 10          10        1      2
## 11          11        1      3
##                                                   Name    Sex Age SibSp Parch
## 2  Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0
## 3                               Heikkinen, Miss. Laina female  26     0     0
## 4         Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0
## 9    Johnson, Mrs. Oscar W (Elisabeth Vilhelmina Berg) female  27     0     2
## 10                 Nasser, Mrs. Nicholas (Adele Achem) female  14     1     0
## 11                     Sandstrom, Miss. Marguerite Rut female   4     1     1
##              Ticket    Fare Cabin Embarked
## 2          PC 17599 71.2833   C85        C
## 3  STON/O2. 3101282  7.9250              S
## 4            113803 53.1000  C123        S
## 9            347742 11.1333              S
## 10           237736 30.0708              C
## 11          PP 9549 16.7000    G6        S</code></pre>
<p>The above data set consists of titanic passengers who survived.</p>
<p>Who were the passengers who boarded the first class on the Titan?</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="data-manipulation.html#cb37-1" tabindex="-1"></a>first_class_passengers <span class="ot">&lt;-</span> titanic[titanic<span class="sc">$</span>Pclass <span class="sc">==</span> <span class="dv">1</span>, ]</span>
<span id="cb37-2"><a href="data-manipulation.html#cb37-2" tabindex="-1"></a><span class="fu">head</span>(first_class_passengers)</span></code></pre></div>
<pre><code>##    PassengerId Survived Pclass
## 2            2        1      1
## 4            4        1      1
## 7            7        0      1
## 12          12        1      1
## 24          24        1      1
## 28          28        0      1
##                                                   Name    Sex Age SibSp Parch
## 2  Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0
## 4         Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0
## 7                              McCarthy, Mr. Timothy J   male  54     0     0
## 12                            Bonnell, Miss. Elizabeth female  58     0     0
## 24                        Sloper, Mr. William Thompson   male  28     0     0
## 28                      Fortune, Mr. Charles Alexander   male  19     3     2
##      Ticket     Fare       Cabin Embarked
## 2  PC 17599  71.2833         C85        C
## 4    113803  53.1000        C123        S
## 7     17463  51.8625         E46        S
## 12   113783  26.5500        C103        S
## 24   113788  35.5000          A6        S
## 28    19950 263.0000 C23 C25 C27        S</code></pre>
<p>The above examples, the extracted data set met a single condition.</p>
<ol start="2" style="list-style-type: decimal">
<li><strong>Filtering based on Multiple Conditions</strong>
Data can be subsetted by filtering based on more than one condition. To demonstrate this, lets find the female passengers who survived. Here there are two conditions;-</li>
</ol>
<ul>
<li>the passenger must be a female,</li>
<li>the passenger must have survived.</li>
</ul>
<p>The resultant data set must meet the above conditions</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="data-manipulation.html#cb39-1" tabindex="-1"></a>female_survivors <span class="ot">&lt;-</span> titanic[titanic<span class="sc">$</span>Sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span> <span class="sc">&amp;</span> titanic<span class="sc">$</span>Survived <span class="sc">==</span> <span class="dv">1</span>, ]</span>
<span id="cb39-2"><a href="data-manipulation.html#cb39-2" tabindex="-1"></a></span>
<span id="cb39-3"><a href="data-manipulation.html#cb39-3" tabindex="-1"></a><span class="fu">head</span>(female_survivors) <span class="co">#view the first few rows </span></span></code></pre></div>
<pre><code>##    PassengerId Survived Pclass
## 2            2        1      1
## 3            3        1      3
## 4            4        1      1
## 9            9        1      3
## 10          10        1      2
## 11          11        1      3
##                                                   Name    Sex Age SibSp Parch
## 2  Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0
## 3                               Heikkinen, Miss. Laina female  26     0     0
## 4         Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0
## 9    Johnson, Mrs. Oscar W (Elisabeth Vilhelmina Berg) female  27     0     2
## 10                 Nasser, Mrs. Nicholas (Adele Achem) female  14     1     0
## 11                     Sandstrom, Miss. Marguerite Rut female   4     1     1
##              Ticket    Fare Cabin Embarked
## 2          PC 17599 71.2833   C85        C
## 3  STON/O2. 3101282  7.9250              S
## 4            113803 53.1000  C123        S
## 9            347742 11.1333              S
## 10           237736 30.0708              C
## 11          PP 9549 16.7000    G6        S</code></pre>
<p>Lets also add one more condition, the female survivor must be under 18.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="data-manipulation.html#cb41-1" tabindex="-1"></a>minor_female_survivors <span class="ot">&lt;-</span> titanic[titanic<span class="sc">$</span>Sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span> <span class="sc">&amp;</span> </span>
<span id="cb41-2"><a href="data-manipulation.html#cb41-2" tabindex="-1"></a>                                    titanic<span class="sc">$</span>Survived <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span></span>
<span id="cb41-3"><a href="data-manipulation.html#cb41-3" tabindex="-1"></a>                                    titanic<span class="sc">$</span>Age <span class="sc">&lt;</span> <span class="dv">18</span>, ] <span class="co"># comma should be after the conditons</span></span>
<span id="cb41-4"><a href="data-manipulation.html#cb41-4" tabindex="-1"></a></span>
<span id="cb41-5"><a href="data-manipulation.html#cb41-5" tabindex="-1"></a><span class="fu">head</span>(minor_female_survivors)</span></code></pre></div>
<pre><code>##      PassengerId Survived Pclass                                Name    Sex Age
## 10            10        1      2 Nasser, Mrs. Nicholas (Adele Achem) female  14
## 11            11        1      3     Sandstrom, Miss. Marguerite Rut female   4
## NA            NA       NA     NA                                &lt;NA&gt;   &lt;NA&gt;  NA
## 23            23        1      3         McGowan, Miss. Anna &quot;Annie&quot; female  15
## NA.1          NA       NA     NA                                &lt;NA&gt;   &lt;NA&gt;  NA
## NA.2          NA       NA     NA                                &lt;NA&gt;   &lt;NA&gt;  NA
##      SibSp Parch  Ticket    Fare Cabin Embarked
## 10       1     0  237736 30.0708              C
## 11       1     1 PP 9549 16.7000    G6        S
## NA      NA    NA    &lt;NA&gt;      NA  &lt;NA&gt;     &lt;NA&gt;
## 23       0     0  330923  8.0292              Q
## NA.1    NA    NA    &lt;NA&gt;      NA  &lt;NA&gt;     &lt;NA&gt;
## NA.2    NA    NA    &lt;NA&gt;      NA  &lt;NA&gt;     &lt;NA&gt;</code></pre>
<ol start="3" style="list-style-type: decimal">
<li><strong>Filtering using Negation</strong><br />
The <code>!=</code> sign a logical operator that is used to negate a condition. Lets use it to find the passengers who did not survive.</li>
</ol>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="data-manipulation.html#cb43-1" tabindex="-1"></a>non_survivors <span class="ot">&lt;-</span> titanic[titanic<span class="sc">$</span>Survived <span class="sc">!=</span> <span class="dv">1</span>, ]</span>
<span id="cb43-2"><a href="data-manipulation.html#cb43-2" tabindex="-1"></a><span class="fu">tail</span>(non_survivors) <span class="co"># view the last few records </span></span></code></pre></div>
<pre><code>##     PassengerId Survived Pclass                                     Name    Sex
## 884         884        0      2            Banfield, Mr. Frederick James   male
## 885         885        0      3                   Sutehall, Mr. Henry Jr   male
## 886         886        0      3     Rice, Mrs. William (Margaret Norton) female
## 887         887        0      2                    Montvila, Rev. Juozas   male
## 889         889        0      3 Johnston, Miss. Catherine Helen &quot;Carrie&quot; female
## 891         891        0      3                      Dooley, Mr. Patrick   male
##     Age SibSp Parch           Ticket   Fare Cabin Embarked
## 884  28     0     0 C.A./SOTON 34068 10.500              S
## 885  25     0     0  SOTON/OQ 392076  7.050              S
## 886  39     0     5           382652 29.125              Q
## 887  27     0     0           211536 13.000              S
## 889  NA     1     2       W./C. 6607 23.450              S
## 891  32     0     0           370376  7.750              Q</code></pre>
<p>Alternatively you can use</p>
<pre><code>non_survivors &lt;- titanic[!titanic$Survived == 1, ]</code></pre>
<p>Also, lets find the passengers who were not in the third class</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="data-manipulation.html#cb46-1" tabindex="-1"></a>not_third_class <span class="ot">&lt;-</span> titanic[titanic<span class="sc">$</span>Pclass <span class="sc">!=</span> <span class="dv">3</span>, ]</span>
<span id="cb46-2"><a href="data-manipulation.html#cb46-2" tabindex="-1"></a><span class="fu">head</span>(not_third_class)</span></code></pre></div>
<pre><code>##    PassengerId Survived Pclass
## 2            2        1      1
## 4            4        1      1
## 7            7        0      1
## 10          10        1      2
## 12          12        1      1
## 16          16        1      2
##                                                   Name    Sex Age SibSp Parch
## 2  Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0
## 4         Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0
## 7                              McCarthy, Mr. Timothy J   male  54     0     0
## 10                 Nasser, Mrs. Nicholas (Adele Achem) female  14     1     0
## 12                            Bonnell, Miss. Elizabeth female  58     0     0
## 16                    Hewlett, Mrs. (Mary D Kingcome)  female  55     0     0
##      Ticket    Fare Cabin Embarked
## 2  PC 17599 71.2833   C85        C
## 4    113803 53.1000  C123        S
## 7     17463 51.8625   E46        S
## 10   237736 30.0708              C
## 12   113783 26.5500  C103        S
## 16   248706 16.0000              S</code></pre>
<p>Alternatively</p>
<pre><code>not_third_class &lt;- titanic[!titanic$Pclass == 3, ]</code></pre>
</div>
</div>
<div id="data-manipulation-with-dplyr" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Data Manipulation with Dplyr<a href="data-manipulation.html#data-manipulation-with-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="introduction-to-dplyr-package" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Introduction to Dplyr package<a href="data-manipulation.html#introduction-to-dplyr-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Dplyr is a package designed for data manipulation equipped with a set of intuitive functions to perform tasks like filtering rows, selecting columns, rearranging data and summarizing information. The package is part of a larger library, <code>tidyverse</code>. The <strong>tidyverse</strong> package is a package designed for data science that share an underlying design philosophy, grammar and data structures. The packages within the tidyverse are widely used for data manipulation, exploration, and visualization in R. Here are some of the core packages in tidyverse;</p>
<ul>
<li><code>ggplot2</code></li>
<li><code>dplyr</code></li>
<li><code>tidyr</code></li>
<li><code>readr</code></li>
<li><code>purrr</code></li>
<li><code>tibble</code></li>
</ul>
<p>The tidyverse package is installed by</p>
<pre><code>install.packages(&quot;tidyverse&quot;)</code></pre>
<p>To invoke the package into the system, the below command is invoked</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="data-manipulation.html#cb50-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching core tidyverse packages ──────
## ✔ dplyr     1.1.4     ✔ readr     2.1.5
## ✔ forcats   1.0.0     ✔ stringr   1.5.1
## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
## ✔ purrr     1.0.2     
## ── Conflicts ───── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
## ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
<p>In this course, we will discuss on <code>dplyr</code>.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-importing-and-exporting.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-visualization.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/balsaedi/RCourse/edit/main/04-data_manipulation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/balsaedi/RCourse/blob/main/04-data_manipulation.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
