<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Data Manipulation | R Course</title>
  <meta name="description" content="Chapter 4 Data Manipulation | R Course" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Data Manipulation | R Course" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Data Manipulation | R Course" />
  
  
  

<meta name="author" content="YOUR NAME HERE" />


<meta name="date" content="2024-08-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-importing-and-exporting.html"/>
<link rel="next" href="data-visualization.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">SHORT TITLE HERE</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction to R and Basic Programming Concepts</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#overview-of-r-programming"><i class="fa fa-check"></i><b>1.1</b> Overview of R Programming</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#introduction-to-r"><i class="fa fa-check"></i><b>1.1.1</b> Introduction to R</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#importance-of-r-in-data-analysis"><i class="fa fa-check"></i><b>1.1.2</b> Importance of R in Data Analysis</a></li>
<li class="chapter" data-level="1.1.3" data-path="index.html"><a href="index.html#application-of-r-in-various-industries"><i class="fa fa-check"></i><b>1.1.3</b> Application of R in Various Industries</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#introduction-to-the-r-ecosystem"><i class="fa fa-check"></i><b>1.2</b> Introduction to the R ecosystem</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#r-studio"><i class="fa fa-check"></i><b>1.2.1</b> R Studio</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#cran"><i class="fa fa-check"></i><b>1.2.2</b> CRAN</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#setting-up-r-environment"><i class="fa fa-check"></i><b>1.3</b> Setting Up R Environment</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#installation-of-r-and-rstudio"><i class="fa fa-check"></i><b>1.3.1</b> Installation of R and RStudio</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#introduction-to-rstudio-interface"><i class="fa fa-check"></i><b>1.3.2</b> Introduction to RStudio Interface</a></li>
<li class="chapter" data-level="1.3.3" data-path="index.html"><a href="index.html#basic-r-syntax-and-commands"><i class="fa fa-check"></i><b>1.3.3</b> Basic R Syntax and Commands</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#hands-on-exercise"><i class="fa fa-check"></i><b>1.4</b> Hands-on Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basic-data-types-and-structures.html"><a href="basic-data-types-and-structures.html"><i class="fa fa-check"></i><b>2</b> Basic Data Types and Structures</a>
<ul>
<li class="chapter" data-level="2.1" data-path="basic-data-types-and-structures.html"><a href="basic-data-types-and-structures.html#data-types"><i class="fa fa-check"></i><b>2.1</b> Data types</a></li>
<li class="chapter" data-level="2.2" data-path="basic-data-types-and-structures.html"><a href="basic-data-types-and-structures.html#data-structures"><i class="fa fa-check"></i><b>2.2</b> Data Structures</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="basic-data-types-and-structures.html"><a href="basic-data-types-and-structures.html#vector"><i class="fa fa-check"></i><b>2.2.1</b> Vector</a></li>
<li class="chapter" data-level="2.2.2" data-path="basic-data-types-and-structures.html"><a href="basic-data-types-and-structures.html#matrix"><i class="fa fa-check"></i><b>2.2.2</b> Matrix</a></li>
<li class="chapter" data-level="2.2.3" data-path="basic-data-types-and-structures.html"><a href="basic-data-types-and-structures.html#data-frame"><i class="fa fa-check"></i><b>2.2.3</b> Data frame</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-importing-and-exporting.html"><a href="data-importing-and-exporting.html"><i class="fa fa-check"></i><b>3</b> Data Importing and Exporting</a></li>
<li class="chapter" data-level="4" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>4</b> Data Manipulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#basic-data-manipulation"><i class="fa fa-check"></i><b>4.1</b> Basic Data Manipulation</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-manipulation.html"><a href="data-manipulation.html#introduction-to-data-manipulation"><i class="fa fa-check"></i><b>4.1.1</b> Introduction to Data Manipulation</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-manipulation.html"><a href="data-manipulation.html#subsetting-and-filtering-data"><i class="fa fa-check"></i><b>4.1.2</b> Subsetting and Filtering Data:</a></li>
<li class="chapter" data-level="4.1.3" data-path="data-manipulation.html"><a href="data-manipulation.html#sorting-data"><i class="fa fa-check"></i><b>4.1.3</b> Sorting Data</a></li>
<li class="chapter" data-level="4.1.4" data-path="data-manipulation.html"><a href="data-manipulation.html#basic-data-cleaning"><i class="fa fa-check"></i><b>4.1.4</b> Basic Data Cleaning</a></li>
<li class="chapter" data-level="4.1.5" data-path="data-manipulation.html"><a href="data-manipulation.html#hands-on-exercises"><i class="fa fa-check"></i><b>4.1.5</b> Hands-on Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#data-manipulation-with-dplyr"><i class="fa fa-check"></i><b>4.2</b> Data Manipulation with Dplyr</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-manipulation.html"><a href="data-manipulation.html#introduction-to-dplyr-package"><i class="fa fa-check"></i><b>4.2.1</b> Introduction to Dplyr package</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-manipulation.html"><a href="data-manipulation.html#hands-on-exercises-1"><i class="fa fa-check"></i><b>4.2.2</b> Hands-on Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>5</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-visualization.html"><a href="data-visualization.html#basic-data-visualization"><i class="fa fa-check"></i><b>5.1</b> Basic Data Visualization</a></li>
<li class="chapter" data-level="5.2" data-path="data-visualization.html"><a href="data-visualization.html#advanced-data-visualization"><i class="fa fa-check"></i><b>5.2</b> Advanced Data Visualization</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="explanatory-data-analysis.html"><a href="explanatory-data-analysis.html"><i class="fa fa-check"></i><b>6</b> Explanatory Data Analysis</a>
<ul>
<li class="chapter" data-level="6.1" data-path="explanatory-data-analysis.html"><a href="explanatory-data-analysis.html#introduction-to-eda"><i class="fa fa-check"></i><b>6.1</b> Introduction to EDA</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="explanatory-data-analysis.html"><a href="explanatory-data-analysis.html#eda-in-practice"><i class="fa fa-check"></i><b>6.1.1</b> EDA in practice</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="statistical-analysis.html"><a href="statistical-analysis.html"><i class="fa fa-check"></i><b>7</b> Statistical Analysis</a>
<ul>
<li class="chapter" data-level="7.1" data-path="statistical-analysis.html"><a href="statistical-analysis.html#basic-concepts"><i class="fa fa-check"></i><b>7.1</b> Basic Concepts</a></li>
<li class="chapter" data-level="7.2" data-path="statistical-analysis.html"><a href="statistical-analysis.html#correlation-and-regression-analysis"><i class="fa fa-check"></i><b>7.2</b> Correlation and Regression Analysis</a></li>
<li class="chapter" data-level="7.3" data-path="statistical-analysis.html"><a href="statistical-analysis.html#advanced-statistical-methods"><i class="fa fa-check"></i><b>7.3</b> Advanced Statistical Methods</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Course</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-manipulation" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Data Manipulation<a href="data-manipulation.html#data-manipulation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="basic-data-manipulation" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Basic Data Manipulation<a href="data-manipulation.html#basic-data-manipulation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Sorting Data:</p>
<ul>
<li>Explanation of sorting data in R using order() and sort() functions.</li>
<li>Demonstration of sorting data frames by one or more columns.</li>
</ul>
<p>Basic Data Cleaning Techniques:</p>
<ul>
<li>Overview of common data cleaning tasks (e.g., handling missing data, removing duplicates).</li>
<li>Demonstration of how to detect and manage missing values using is.na() and na.omit() functions.</li>
</ul>
<div id="introduction-to-data-manipulation" class="section level3 hasAnchor" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Introduction to Data Manipulation<a href="data-manipulation.html#introduction-to-data-manipulation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Data Manipulation is the adjusting, organizing and transforming of the raw data is not a more useful and suitable format for data analysis. These are some of the reasons that make data manipulation mandatory in the data analysis process;</p>
<ol style="list-style-type: decimal">
<li><p><strong>Improves the data quality</strong><br />
Raw data may be incomplete, messy, containing irrelevant information, errors ,or duplicates that need to be cleaned and rectified. This will ensure the data is reliable thereby preventing incorrect conclusions or decisions.</p></li>
<li><p><strong>Making Data Usable</strong>
Sometimes data is collected from different sources that is not ready for analysis. Data Manipulation will transform the data into a structured and consistent format for easy analysis.</p></li>
<li><p><strong>Enhancing Data Exploration</strong><br />
By cleaning the data, analysts explore the data thereby understanding different concepts of the data.</p></li>
<li><p><strong>Enabling Complex Analysis</strong><br />
Some types of analysis require data to be in specific format or structure, for instance the time series analysis require data to be sorted out by date.</p></li>
<li><p><strong>Supporting Decision Making</strong><br />
Data Manipulation ensures that the data that is fed into the system is timely, accurate and reliable for informed decision-making models and relevant reports
<br></p></li>
</ol>
<p>These are the key tasks in the data manipulation;</p>
<ul>
<li><strong>Cleaning</strong>: by removing inaccurate and incomplete data entries.</li>
<li><strong>Filtering</strong> the data by selecting certain rows or columns based on a certain criteria.</li>
<li><strong>Reshaping</strong>: Changing the structure of the data for instance pivoting.</li>
<li><strong>Merging</strong>: Combine multiple data sets into one.</li>
<li><strong>Transforming</strong>: Modify existing data by mathematical or logical operations.</li>
<li><strong>Aggregation</strong>: Summarizing the data by performing operations like sum,average and count.</li>
</ul>
</div>
<div id="subsetting-and-filtering-data" class="section level3 hasAnchor" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Subsetting and Filtering Data:<a href="data-manipulation.html#subsetting-and-filtering-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Subsetting</strong> is a data management strategy that involves creating a coherent slice data from different data set for specific use cases. This topic will better be explained practically, therefore we will use the titanic data set. The data set contains information about the passengers on the Titanic, including their age, gender, passenger class, whether they survived and other details. Since the titanic dataset is absent in baseR, the <code>titanic</code> library will be installed by;</p>
<pre><code>install.packages(&quot;titanic&quot;)</code></pre>
<p>load the library</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="data-manipulation.html#cb258-1" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;titanic&quot;</span>)</span></code></pre></div>
<p>The data set will indexed using different indexing techniques such as indexing of a single element, row and column indexing.</p>
<p>First we load the data set and view the first few records before indexing</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="data-manipulation.html#cb259-1" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;titanic_train&quot;</span>)</span>
<span id="cb259-2"><a href="data-manipulation.html#cb259-2" tabindex="-1"></a></span>
<span id="cb259-3"><a href="data-manipulation.html#cb259-3" tabindex="-1"></a>titanic <span class="ot">&lt;-</span> titanic_train </span>
<span id="cb259-4"><a href="data-manipulation.html#cb259-4" tabindex="-1"></a><span class="fu">head</span>(titanic) <span class="co"># view the first few rows of the titanic data set</span></span></code></pre></div>
<pre><code>##   PassengerId Survived Pclass
## 1           1        0      3
## 2           2        1      1
## 3           3        1      3
## 4           4        1      1
## 5           5        0      3
## 6           6        0      3
##                                                  Name    Sex Age SibSp Parch
## 1                             Braund, Mr. Owen Harris   male  22     1     0
## 2 Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0
## 3                              Heikkinen, Miss. Laina female  26     0     0
## 4        Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0
## 5                            Allen, Mr. William Henry   male  35     0     0
## 6                                    Moran, Mr. James   male  NA     0     0
##             Ticket    Fare Cabin Embarked
## 1        A/5 21171  7.2500              S
## 2         PC 17599 71.2833   C85        C
## 3 STON/O2. 3101282  7.9250              S
## 4           113803 53.1000  C123        S
## 5           373450  8.0500              S
## 6           330877  8.4583              Q</code></pre>
<ol style="list-style-type: decimal">
<li><strong>Extract a row</strong>
When subsetting to extract data for a single row the square brackets <code>[ ]</code> will be used with the position of the index you want to extract. Lets extract all the information of the 10th passenger.</li>
</ol>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="data-manipulation.html#cb261-1" tabindex="-1"></a>titanic[<span class="dv">10</span>, ] <span class="co"># note the comma after the index 10</span></span></code></pre></div>
<pre><code>##    PassengerId Survived Pclass                                Name    Sex Age
## 10          10        1      2 Nasser, Mrs. Nicholas (Adele Achem) female  14
##    SibSp Parch Ticket    Fare Cabin Embarked
## 10     1     0 237736 30.0708              C</code></pre>
<p>Also, more indices can be subsetted in the format <code>[i:j, ]</code> where the <code>i</code> is the starting index while <code>j</code> is the ending index respectively. Lets extract the information by subsetting the titanic data from index 7 to 10.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="data-manipulation.html#cb263-1" tabindex="-1"></a>titanic[<span class="dv">7</span><span class="sc">:</span><span class="dv">10</span>, ]</span></code></pre></div>
<pre><code>##    PassengerId Survived Pclass
## 7            7        0      1
## 8            8        0      3
## 9            9        1      3
## 10          10        1      2
##                                                 Name    Sex Age SibSp Parch
## 7                            McCarthy, Mr. Timothy J   male  54     0     0
## 8                     Palsson, Master. Gosta Leonard   male   2     3     1
## 9  Johnson, Mrs. Oscar W (Elisabeth Vilhelmina Berg) female  27     0     2
## 10               Nasser, Mrs. Nicholas (Adele Achem) female  14     1     0
##    Ticket    Fare Cabin Embarked
## 7   17463 51.8625   E46        S
## 8  349909 21.0750              S
## 9  347742 11.1333              S
## 10 237736 30.0708              C</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><strong>Extract a column</strong><br />
When subsetting to extract data for a single column the square brackets <code>[ ]</code> will be used as before, with the position of the index or column name you want to extract. Lets extract all the information of the column <code>Name</code>.</li>
</ol>
<pre><code>titanic[, &quot;Name&quot;] # note the comma before &quot;Name&quot;</code></pre>
<p><img src="images/dataset_images/titanic_names.png" /></p>
<p>An index of the column can be used in place of the column name. For instance, the column, “PassengerId” is the first column therefore its index will be <code>1</code>. Lets subset the column by calling the index.</p>
<pre><code>titanic[, 1] # note the comma before the column index</code></pre>
<p><img src="images/dataset_images/titanic_passengers_id.png" /></p>
<ol start="3" style="list-style-type: decimal">
<li><strong>Extracting a single element</strong><br />
A single element that has a defined position in a data frame, both the row index and the column name/index are called.</li>
</ol>
<pre><code>dataframe[row_index, column index/name]</code></pre>
<p>Lets extract the age of the Name of the fifth passenger.</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="data-manipulation.html#cb268-1" tabindex="-1"></a>titanic[<span class="dv">5</span>, <span class="st">&quot;Name&quot;</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Allen, Mr. William Henry&quot;</code></pre>
<p>Instead of using the column name. Lets use the column index. In the above context, the column “Name” appears at index(is the fourth column).</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="data-manipulation.html#cb270-1" tabindex="-1"></a>titanic[<span class="dv">5</span>, <span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Allen, Mr. William Henry&quot;</code></pre>
<p>Subsetting a data set can be done by <strong>filtering</strong> data based on logical conditions to extract rows that meet certain criteria. They involve comparisons operators such as <code>&gt;, &lt;, ==, !=</code> or logical operators like <code>&amp;</code>(and), <code>|</code>(or), <code>!</code> (not).</p>
<p>In this titanic data set we:-</p>
<ol style="list-style-type: decimal">
<li><strong>Filter based on a single condition</strong>
Lets find the passengers who survived on the titanic.</li>
</ol>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="data-manipulation.html#cb272-1" tabindex="-1"></a>survivors <span class="ot">&lt;-</span> titanic[titanic<span class="sc">$</span>Survived <span class="sc">==</span> <span class="dv">1</span>, ]</span>
<span id="cb272-2"><a href="data-manipulation.html#cb272-2" tabindex="-1"></a><span class="fu">head</span>(survivors) <span class="co"># view the first few rows of survivors</span></span></code></pre></div>
<pre><code>##    PassengerId Survived Pclass
## 2            2        1      1
## 3            3        1      3
## 4            4        1      1
## 9            9        1      3
## 10          10        1      2
## 11          11        1      3
##                                                   Name    Sex Age SibSp Parch
## 2  Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0
## 3                               Heikkinen, Miss. Laina female  26     0     0
## 4         Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0
## 9    Johnson, Mrs. Oscar W (Elisabeth Vilhelmina Berg) female  27     0     2
## 10                 Nasser, Mrs. Nicholas (Adele Achem) female  14     1     0
## 11                     Sandstrom, Miss. Marguerite Rut female   4     1     1
##              Ticket    Fare Cabin Embarked
## 2          PC 17599 71.2833   C85        C
## 3  STON/O2. 3101282  7.9250              S
## 4            113803 53.1000  C123        S
## 9            347742 11.1333              S
## 10           237736 30.0708              C
## 11          PP 9549 16.7000    G6        S</code></pre>
<p>The above data set consists of titanic passengers who survived.</p>
<p>Who were the passengers who boarded the first class on the Titan?</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="data-manipulation.html#cb274-1" tabindex="-1"></a>first_class_passengers <span class="ot">&lt;-</span> titanic[titanic<span class="sc">$</span>Pclass <span class="sc">==</span> <span class="dv">1</span>, ]</span>
<span id="cb274-2"><a href="data-manipulation.html#cb274-2" tabindex="-1"></a><span class="fu">head</span>(first_class_passengers)</span></code></pre></div>
<pre><code>##    PassengerId Survived Pclass
## 2            2        1      1
## 4            4        1      1
## 7            7        0      1
## 12          12        1      1
## 24          24        1      1
## 28          28        0      1
##                                                   Name    Sex Age SibSp Parch
## 2  Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0
## 4         Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0
## 7                              McCarthy, Mr. Timothy J   male  54     0     0
## 12                            Bonnell, Miss. Elizabeth female  58     0     0
## 24                        Sloper, Mr. William Thompson   male  28     0     0
## 28                      Fortune, Mr. Charles Alexander   male  19     3     2
##      Ticket     Fare       Cabin Embarked
## 2  PC 17599  71.2833         C85        C
## 4    113803  53.1000        C123        S
## 7     17463  51.8625         E46        S
## 12   113783  26.5500        C103        S
## 24   113788  35.5000          A6        S
## 28    19950 263.0000 C23 C25 C27        S</code></pre>
<p>The above examples, the extracted data set met a single condition.</p>
<ol start="2" style="list-style-type: decimal">
<li><strong>Filtering based on Multiple Conditions</strong>
Data can be subsetted by filtering based on more than one condition. To demonstrate this, lets find the female passengers who survived. Here there are two conditions;-</li>
</ol>
<ul>
<li>the passenger must be a female,</li>
<li>the passenger must have survived.</li>
</ul>
<p>The resultant data set must meet the above conditions</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="data-manipulation.html#cb276-1" tabindex="-1"></a>female_survivors <span class="ot">&lt;-</span> titanic[titanic<span class="sc">$</span>Sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span> <span class="sc">&amp;</span> titanic<span class="sc">$</span>Survived <span class="sc">==</span> <span class="dv">1</span>, ]</span>
<span id="cb276-2"><a href="data-manipulation.html#cb276-2" tabindex="-1"></a></span>
<span id="cb276-3"><a href="data-manipulation.html#cb276-3" tabindex="-1"></a><span class="fu">head</span>(female_survivors) <span class="co">#view the first few rows </span></span></code></pre></div>
<pre><code>##    PassengerId Survived Pclass
## 2            2        1      1
## 3            3        1      3
## 4            4        1      1
## 9            9        1      3
## 10          10        1      2
## 11          11        1      3
##                                                   Name    Sex Age SibSp Parch
## 2  Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0
## 3                               Heikkinen, Miss. Laina female  26     0     0
## 4         Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0
## 9    Johnson, Mrs. Oscar W (Elisabeth Vilhelmina Berg) female  27     0     2
## 10                 Nasser, Mrs. Nicholas (Adele Achem) female  14     1     0
## 11                     Sandstrom, Miss. Marguerite Rut female   4     1     1
##              Ticket    Fare Cabin Embarked
## 2          PC 17599 71.2833   C85        C
## 3  STON/O2. 3101282  7.9250              S
## 4            113803 53.1000  C123        S
## 9            347742 11.1333              S
## 10           237736 30.0708              C
## 11          PP 9549 16.7000    G6        S</code></pre>
<p>Lets also add one more condition, the female survivor must be under 18.</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="data-manipulation.html#cb278-1" tabindex="-1"></a>minor_female_survivors <span class="ot">&lt;-</span> titanic[titanic<span class="sc">$</span>Sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span> <span class="sc">&amp;</span> </span>
<span id="cb278-2"><a href="data-manipulation.html#cb278-2" tabindex="-1"></a>                                    titanic<span class="sc">$</span>Survived <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span></span>
<span id="cb278-3"><a href="data-manipulation.html#cb278-3" tabindex="-1"></a>                                    titanic<span class="sc">$</span>Age <span class="sc">&lt;</span> <span class="dv">18</span>, ] <span class="co"># comma should be after the conditons</span></span>
<span id="cb278-4"><a href="data-manipulation.html#cb278-4" tabindex="-1"></a></span>
<span id="cb278-5"><a href="data-manipulation.html#cb278-5" tabindex="-1"></a><span class="fu">head</span>(minor_female_survivors)</span></code></pre></div>
<pre><code>##      PassengerId Survived Pclass                                Name    Sex Age
## 10            10        1      2 Nasser, Mrs. Nicholas (Adele Achem) female  14
## 11            11        1      3     Sandstrom, Miss. Marguerite Rut female   4
## NA            NA       NA     NA                                &lt;NA&gt;   &lt;NA&gt;  NA
## 23            23        1      3         McGowan, Miss. Anna &quot;Annie&quot; female  15
## NA.1          NA       NA     NA                                &lt;NA&gt;   &lt;NA&gt;  NA
## NA.2          NA       NA     NA                                &lt;NA&gt;   &lt;NA&gt;  NA
##      SibSp Parch  Ticket    Fare Cabin Embarked
## 10       1     0  237736 30.0708              C
## 11       1     1 PP 9549 16.7000    G6        S
## NA      NA    NA    &lt;NA&gt;      NA  &lt;NA&gt;     &lt;NA&gt;
## 23       0     0  330923  8.0292              Q
## NA.1    NA    NA    &lt;NA&gt;      NA  &lt;NA&gt;     &lt;NA&gt;
## NA.2    NA    NA    &lt;NA&gt;      NA  &lt;NA&gt;     &lt;NA&gt;</code></pre>
<ol start="3" style="list-style-type: decimal">
<li><strong>Filtering using Negation</strong><br />
The <code>!=</code> sign a logical operator that is used to negate a condition. Lets use it to find the passengers who did not survive.</li>
</ol>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="data-manipulation.html#cb280-1" tabindex="-1"></a>non_survivors <span class="ot">&lt;-</span> titanic[titanic<span class="sc">$</span>Survived <span class="sc">!=</span> <span class="dv">1</span>, ]</span>
<span id="cb280-2"><a href="data-manipulation.html#cb280-2" tabindex="-1"></a><span class="fu">tail</span>(non_survivors) <span class="co"># view the last few records </span></span></code></pre></div>
<pre><code>##     PassengerId Survived Pclass                                     Name    Sex
## 884         884        0      2            Banfield, Mr. Frederick James   male
## 885         885        0      3                   Sutehall, Mr. Henry Jr   male
## 886         886        0      3     Rice, Mrs. William (Margaret Norton) female
## 887         887        0      2                    Montvila, Rev. Juozas   male
## 889         889        0      3 Johnston, Miss. Catherine Helen &quot;Carrie&quot; female
## 891         891        0      3                      Dooley, Mr. Patrick   male
##     Age SibSp Parch           Ticket   Fare Cabin Embarked
## 884  28     0     0 C.A./SOTON 34068 10.500              S
## 885  25     0     0  SOTON/OQ 392076  7.050              S
## 886  39     0     5           382652 29.125              Q
## 887  27     0     0           211536 13.000              S
## 889  NA     1     2       W./C. 6607 23.450              S
## 891  32     0     0           370376  7.750              Q</code></pre>
<p>Alternatively you can use</p>
<pre><code>non_survivors &lt;- titanic[!titanic$Survived == 1, ]</code></pre>
<p>Also, lets find the passengers who were not in the third class</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="data-manipulation.html#cb283-1" tabindex="-1"></a>not_third_class <span class="ot">&lt;-</span> titanic[titanic<span class="sc">$</span>Pclass <span class="sc">!=</span> <span class="dv">3</span>, ]</span>
<span id="cb283-2"><a href="data-manipulation.html#cb283-2" tabindex="-1"></a><span class="fu">head</span>(not_third_class)</span></code></pre></div>
<pre><code>##    PassengerId Survived Pclass
## 2            2        1      1
## 4            4        1      1
## 7            7        0      1
## 10          10        1      2
## 12          12        1      1
## 16          16        1      2
##                                                   Name    Sex Age SibSp Parch
## 2  Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0
## 4         Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0
## 7                              McCarthy, Mr. Timothy J   male  54     0     0
## 10                 Nasser, Mrs. Nicholas (Adele Achem) female  14     1     0
## 12                            Bonnell, Miss. Elizabeth female  58     0     0
## 16                    Hewlett, Mrs. (Mary D Kingcome)  female  55     0     0
##      Ticket    Fare Cabin Embarked
## 2  PC 17599 71.2833   C85        C
## 4    113803 53.1000  C123        S
## 7     17463 51.8625   E46        S
## 10   237736 30.0708              C
## 12   113783 26.5500  C103        S
## 16   248706 16.0000              S</code></pre>
<p>Alternatively</p>
<pre><code>not_third_class &lt;- titanic[!titanic$Pclass == 3, ]</code></pre>
</div>
<div id="sorting-data" class="section level3 hasAnchor" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Sorting Data<a href="data-manipulation.html#sorting-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sorting is the ordering of elements in a data set (vectors, lists, matrix and data frames) based on a particular criteria. This is a fundamental operation data analysis, as it enables data organization in a meaningful way for easier visualization and interpretation. These are the several functions in Base R that are used in sorting;-</p>
<ol style="list-style-type: decimal">
<li><code>sort()</code></li>
</ol>
<ul>
<li>Lets create a vector v with five elements</li>
<li>Sort the elements in a descending order</li>
</ul>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="data-manipulation.html#cb286-1" tabindex="-1"></a>v <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">43</span>, <span class="dv">82</span>, <span class="dv">11</span>, <span class="dv">73</span>, <span class="dv">34</span>) <span class="co"># Create a vector</span></span>
<span id="cb286-2"><a href="data-manipulation.html#cb286-2" tabindex="-1"></a>v1 <span class="ot">=</span> <span class="fu">sort</span>(v, <span class="at">decreasing =</span> <span class="cn">TRUE</span>) <span class="co">#sort the elements in a descending order</span></span>
<span id="cb286-3"><a href="data-manipulation.html#cb286-3" tabindex="-1"></a>v1</span></code></pre></div>
<pre><code>## [1] 82 73 43 34 11</code></pre>
<ul>
<li>to order the same vector in an ascending order the <code>decreasing</code> argument is set to <code>FALSE</code>.</li>
</ul>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="data-manipulation.html#cb288-1" tabindex="-1"></a>v <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">43</span>, <span class="dv">82</span>, <span class="dv">11</span>, <span class="dv">73</span>, <span class="dv">34</span>) <span class="co"># Create a vector</span></span>
<span id="cb288-2"><a href="data-manipulation.html#cb288-2" tabindex="-1"></a>v2 <span class="ot">=</span> <span class="fu">sort</span>(v, <span class="at">decreasing =</span> <span class="cn">FALSE</span>) <span class="co">#sort the elements in an ascending order</span></span>
<span id="cb288-3"><a href="data-manipulation.html#cb288-3" tabindex="-1"></a>v2</span></code></pre></div>
<pre><code>## [1] 11 34 43 73 82</code></pre>
<ul>
<li>Also character vectors can be sorted in alphabetical order for instance lets sort the the names, <code>"Alice", "Charlie", "Bob"</code> in the alphabetical order.</li>
</ul>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="data-manipulation.html#cb290-1" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Alice&quot;</span>, <span class="st">&quot;Charlie&quot;</span>, <span class="st">&quot;Bob&quot;</span>)</span>
<span id="cb290-2"><a href="data-manipulation.html#cb290-2" tabindex="-1"></a>sorted_names <span class="ot">&lt;-</span> <span class="fu">sort</span>(names)</span>
<span id="cb290-3"><a href="data-manipulation.html#cb290-3" tabindex="-1"></a>sorted_names</span></code></pre></div>
<pre><code>## [1] &quot;Alice&quot;   &quot;Bob&quot;     &quot;Charlie&quot;</code></pre>
<ul>
<li>Alternatively, the names can be ordered in the reverse alphabetical order when the <code>decreasing</code> argument is set to <code>TRUE</code>.</li>
</ul>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="data-manipulation.html#cb292-1" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Alice&quot;</span>, <span class="st">&quot;Charlie&quot;</span>, <span class="st">&quot;Bob&quot;</span>, <span class="st">&quot;Zach&quot;</span>)</span>
<span id="cb292-2"><a href="data-manipulation.html#cb292-2" tabindex="-1"></a>names_1 <span class="ot">&lt;-</span> <span class="fu">sort</span>(names, <span class="at">decreasing =</span> <span class="cn">TRUE</span>) <span class="co"># order in reverse alphabetical order</span></span>
<span id="cb292-3"><a href="data-manipulation.html#cb292-3" tabindex="-1"></a>names_1</span></code></pre></div>
<pre><code>## [1] &quot;Zach&quot;    &quot;Charlie&quot; &quot;Bob&quot;     &quot;Alice&quot;</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><code>order()</code></li>
</ol>
<p>This function returns the indices that would sort the vectors. For instance lets sort the vector <code>v = c(43, 82, 11, 73, 34)</code> in an ascending order(from smallest to the largest). The smallest number in this case is 11, therefore, the <code>order()</code> function will return 1 while 82 is the largest(5th smallest) number in this case, it will be returned as 5.</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="data-manipulation.html#cb294-1" tabindex="-1"></a>v <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">43</span>, <span class="dv">82</span>, <span class="dv">11</span>, <span class="dv">73</span>, <span class="dv">34</span>)</span>
<span id="cb294-2"><a href="data-manipulation.html#cb294-2" tabindex="-1"></a><span class="fu">order</span>(v, <span class="at">decreasing =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] 3 5 1 4 2</code></pre>
<p>&lt;&lt;&lt;&lt;<strong>Add two more examples</strong>&gt;&gt;&gt;&gt;</p>
<ol start="3" style="list-style-type: decimal">
<li><code>rank()</code></li>
</ol>
<p>Returns of the rank of the element in a vector, list. The smallest element is ranked as 1(in this case its 11) while largest element is ranked last(82 is ranked 5 here)</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="data-manipulation.html#cb296-1" tabindex="-1"></a>v <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">43</span>, <span class="dv">82</span>, <span class="dv">11</span>, <span class="dv">73</span>, <span class="dv">34</span>)</span>
<span id="cb296-2"><a href="data-manipulation.html#cb296-2" tabindex="-1"></a><span class="fu">rank</span>(v, <span class="at">ties.method =</span> <span class="st">&quot;average&quot;</span>, <span class="at">na.last =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 3 5 1 4 2</code></pre>
<ol start="4" style="list-style-type: decimal">
<li><code>rev()</code></li>
</ol>
<p>This function simply reverse the order of elements. The first element in a vector will be last while the last one will be first.</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="data-manipulation.html#cb298-1" tabindex="-1"></a>v <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">43</span>, <span class="dv">82</span>, <span class="dv">11</span>, <span class="dv">73</span>, <span class="dv">34</span>)</span>
<span id="cb298-2"><a href="data-manipulation.html#cb298-2" tabindex="-1"></a><span class="fu">rev</span>(v)</span></code></pre></div>
<pre><code>## [1] 34 73 11 82 43</code></pre>
<ol start="5" style="list-style-type: decimal">
<li><strong>Sorting Data Frames</strong></li>
</ol>
<p>A data frame can be sorted in descending/ascending order of a certain column. For instance, we will sort the titanic data set in the order of age in ascending order.</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="data-manipulation.html#cb300-1" tabindex="-1"></a>titanic_by_age <span class="ot">&lt;-</span> titanic[<span class="fu">order</span>(titanic<span class="sc">$</span>Age), ]</span>
<span id="cb300-2"><a href="data-manipulation.html#cb300-2" tabindex="-1"></a><span class="fu">head</span>(titanic_by_age)</span></code></pre></div>
<pre><code>##     PassengerId Survived Pclass                            Name    Sex  Age
## 804         804        1      3 Thomas, Master. Assad Alexander   male 0.42
## 756         756        1      2       Hamalainen, Master. Viljo   male 0.67
## 470         470        1      3   Baclini, Miss. Helene Barbara female 0.75
## 645         645        1      3          Baclini, Miss. Eugenie female 0.75
## 79           79        1      2   Caldwell, Master. Alden Gates   male 0.83
## 832         832        1      2 Richards, Master. George Sibley   male 0.83
##     SibSp Parch Ticket    Fare Cabin Embarked
## 804     0     1   2625  8.5167              C
## 756     1     1 250649 14.5000              S
## 470     2     1   2666 19.2583              C
## 645     2     1   2666 19.2583              C
## 79      0     2 248738 29.0000              S
## 832     1     1  29106 18.7500              S</code></pre>
<p>Sorting the titanic data by age in descending order, <code>-</code> will be added infront of argument <code>titanic$Age</code> to be <code>-titanic$Age</code></p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="data-manipulation.html#cb302-1" tabindex="-1"></a>titanic_by_age <span class="ot">&lt;-</span> titanic[<span class="fu">order</span>(<span class="sc">-</span>titanic<span class="sc">$</span>Age), ] <span class="co"># note the - sign</span></span>
<span id="cb302-2"><a href="data-manipulation.html#cb302-2" tabindex="-1"></a><span class="fu">head</span>(titanic_by_age)</span></code></pre></div>
<pre><code>##     PassengerId Survived Pclass                                 Name  Sex  Age
## 631         631        1      1 Barkworth, Mr. Algernon Henry Wilson male 80.0
## 852         852        0      3                  Svensson, Mr. Johan male 74.0
## 97           97        0      1            Goldschmidt, Mr. George B male 71.0
## 494         494        0      1              Artagaveytia, Mr. Ramon male 71.0
## 117         117        0      3                 Connors, Mr. Patrick male 70.5
## 673         673        0      2          Mitchell, Mr. Henry Michael male 70.0
##     SibSp Parch     Ticket    Fare Cabin Embarked
## 631     0     0      27042 30.0000   A23        S
## 852     0     0     347060  7.7750              S
## 97      0     0   PC 17754 34.6542    A5        C
## 494     0     0   PC 17609 49.5042              C
## 117     0     0     370369  7.7500              Q
## 673     0     0 C.A. 24580 10.5000              S</code></pre>
<p>Also, dataframes can be sorted based by multiple columns. Lets sort the titanic data set by Passenger class (<code>Pclass</code>) in ascending order and by age in descending order at once.</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="data-manipulation.html#cb304-1" tabindex="-1"></a><span class="co"># Pclass in ascending order, Age in descending order</span></span>
<span id="cb304-2"><a href="data-manipulation.html#cb304-2" tabindex="-1"></a>titanic_sorted_by_class_and_age <span class="ot">&lt;-</span> titanic[<span class="fu">order</span>(titanic<span class="sc">$</span>Pclass, <span class="sc">-</span>titanic<span class="sc">$</span>Age), ]</span>
<span id="cb304-3"><a href="data-manipulation.html#cb304-3" tabindex="-1"></a></span>
<span id="cb304-4"><a href="data-manipulation.html#cb304-4" tabindex="-1"></a><span class="fu">head</span>(titanic_sorted_by_class_and_age)</span></code></pre></div>
<pre><code>##     PassengerId Survived Pclass                                 Name  Sex Age
## 631         631        1      1 Barkworth, Mr. Algernon Henry Wilson male  80
## 97           97        0      1            Goldschmidt, Mr. George B male  71
## 494         494        0      1              Artagaveytia, Mr. Ramon male  71
## 746         746        0      1         Crosby, Capt. Edward Gifford male  70
## 55           55        0      1       Ostby, Mr. Engelhart Cornelius male  65
## 457         457        0      1            Millet, Mr. Francis Davis male  65
##     SibSp Parch    Ticket    Fare Cabin Embarked
## 631     0     0     27042 30.0000   A23        S
## 97      0     0  PC 17754 34.6542    A5        C
## 494     0     0  PC 17609 49.5042              C
## 746     1     1 WE/P 5735 71.0000   B22        S
## 55      0     1    113509 61.9792   B30        C
## 457     0     0     13509 26.5500   E38        S</code></pre>
</div>
<div id="basic-data-cleaning" class="section level3 hasAnchor" number="4.1.4">
<h3><span class="header-section-number">4.1.4</span> Basic Data Cleaning<a href="data-manipulation.html#basic-data-cleaning" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Data Cleaning</strong> is the process of fixing, removing incorrect, incomplete or otherwise problematic data from a data set. This is a crucial step in data analysis as it leads to more reliable analyses and insights.</p>
<p>Here some data cleaning techniques used;</p>
<ol style="list-style-type: decimal">
<li><strong>Handling Missing Data</strong><br />
The null values are identified by <code>is.na()</code> function. If there exists null values, they are removed by <code>na.omit()</code> function. The null values can also be replaced by appropriate substitutes such as the mean, median, zero value or a placeholder, this is referred to as imputation.<br />
Lets create a vector <code>myvector</code> will null values, identify the null values, remove/impute them.</li>
</ol>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="data-manipulation.html#cb306-1" tabindex="-1"></a><span class="co"># Create a vector that has missing values</span></span>
<span id="cb306-2"><a href="data-manipulation.html#cb306-2" tabindex="-1"></a>my_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">43</span>, <span class="cn">NA</span>, <span class="dv">32</span>, <span class="dv">65</span>, <span class="dv">11</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">34</span>, <span class="dv">98</span>, <span class="dv">57</span>) <span class="co"># NA is the missing value</span></span>
<span id="cb306-3"><a href="data-manipulation.html#cb306-3" tabindex="-1"></a></span>
<span id="cb306-4"><a href="data-manipulation.html#cb306-4" tabindex="-1"></a><span class="co"># Identify existence of the null values</span></span>
<span id="cb306-5"><a href="data-manipulation.html#cb306-5" tabindex="-1"></a><span class="fu">is.na</span>(my_vector)</span></code></pre></div>
<pre><code>##  [1] FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="data-manipulation.html#cb308-1" tabindex="-1"></a><span class="co"># Count the null values </span></span>
<span id="cb308-2"><a href="data-manipulation.html#cb308-2" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(my_vector))</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="data-manipulation.html#cb310-1" tabindex="-1"></a><span class="co"># remove null values </span></span>
<span id="cb310-2"><a href="data-manipulation.html#cb310-2" tabindex="-1"></a>clean_vector <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(my_vector)</span>
<span id="cb310-3"><a href="data-manipulation.html#cb310-3" tabindex="-1"></a>clean_vector</span></code></pre></div>
<pre><code>## [1] 12 43 32 65 11 34 98 57
## attr(,&quot;na.action&quot;)
## [1] 3 7 8
## attr(,&quot;class&quot;)
## [1] &quot;omit&quot;</code></pre>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="data-manipulation.html#cb312-1" tabindex="-1"></a><span class="co"># impute missing values</span></span>
<span id="cb312-2"><a href="data-manipulation.html#cb312-2" tabindex="-1"></a>my_vector[<span class="fu">is.na</span>(my_vector)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(my_vector, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb312-3"><a href="data-manipulation.html#cb312-3" tabindex="-1"></a>my_vector</span></code></pre></div>
<pre><code>##  [1] 12 43 44 32 65 11 44 44 34 98 57</code></pre>
<p>&lt;- <strong>Add more ways to remove null values</strong> -&gt; <a href="https://sparkbyexamples.com/r-programming/remove-na-from-vector-in-r/#" class="uri">https://sparkbyexamples.com/r-programming/remove-na-from-vector-in-r/#</a>:~:text=In%20R%2C%20NA%20denotes%20’Missing,NA%20values%20from%20a%20vector.</p>
<ol start="2" style="list-style-type: decimal">
<li><strong>Removing Duplicates</strong>
In a raw data set there may exist some duplicated entries/records/rows that will give false results in data analysis thereby leading to poor insights and decision-making. The duplicates are identified by <code>duplicated()</code> function. If there exists any duplicates, they are removed by subsetting or calling <code>unique()</code> function.</li>
</ol>
<p>Lets create a data frame with duplicate values and remove them</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="data-manipulation.html#cb314-1" tabindex="-1"></a><span class="co"># Creating a simple data frame</span></span>
<span id="cb314-2"><a href="data-manipulation.html#cb314-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb314-3"><a href="data-manipulation.html#cb314-3" tabindex="-1"></a>  <span class="at">Position =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">3</span>),  <span class="co"># Notice the duplicate position</span></span>
<span id="cb314-4"><a href="data-manipulation.html#cb314-4" tabindex="-1"></a>  <span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Alice&quot;</span>, <span class="st">&quot;Bob&quot;</span>, <span class="st">&quot;Charlie&quot;</span>, <span class="st">&quot;David&quot;</span>, <span class="st">&quot;Eva&quot;</span>, <span class="st">&quot;Charlie&quot;</span>),</span>
<span id="cb314-5"><a href="data-manipulation.html#cb314-5" tabindex="-1"></a>  <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">30</span>, <span class="cn">NA</span>, <span class="dv">40</span>, <span class="dv">29</span>, <span class="cn">NA</span>),  <span class="co"># NA represents null values</span></span>
<span id="cb314-6"><a href="data-manipulation.html#cb314-6" tabindex="-1"></a>  <span class="at">Score =</span> <span class="fu">c</span>(<span class="dv">85</span>, <span class="dv">90</span>, <span class="dv">88</span>, <span class="cn">NA</span>, <span class="dv">92</span>, <span class="dv">88</span>)  <span class="co"># NA represents null values</span></span>
<span id="cb314-7"><a href="data-manipulation.html#cb314-7" tabindex="-1"></a>) <span class="co"># Position 3 is duplicated</span></span>
<span id="cb314-8"><a href="data-manipulation.html#cb314-8" tabindex="-1"></a></span>
<span id="cb314-9"><a href="data-manipulation.html#cb314-9" tabindex="-1"></a><span class="co"># Display the data frame</span></span>
<span id="cb314-10"><a href="data-manipulation.html#cb314-10" tabindex="-1"></a><span class="fu">print</span>(data)</span></code></pre></div>
<pre><code>##   Position    Name Age Score
## 1        1   Alice  25    85
## 2        2     Bob  30    90
## 3        3 Charlie  NA    88
## 4        4   David  40    NA
## 5        5     Eva  29    92
## 6        3 Charlie  NA    88</code></pre>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="data-manipulation.html#cb316-1" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&quot;CLEAN DATA&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;CLEAN DATA&quot;</code></pre>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="data-manipulation.html#cb318-1" tabindex="-1"></a><span class="co"># Remove the duplicate row</span></span>
<span id="cb318-2"><a href="data-manipulation.html#cb318-2" tabindex="-1"></a>clean_data <span class="ot">&lt;-</span> <span class="fu">unique</span>(data)</span>
<span id="cb318-3"><a href="data-manipulation.html#cb318-3" tabindex="-1"></a>clean_data</span></code></pre></div>
<pre><code>##   Position    Name Age Score
## 1        1   Alice  25    85
## 2        2     Bob  30    90
## 3        3 Charlie  NA    88
## 4        4   David  40    NA
## 5        5     Eva  29    92</code></pre>
<p>Also the duplicated rows can be removed by</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="data-manipulation.html#cb320-1" tabindex="-1"></a>clean_data2 <span class="ot">&lt;-</span> data[<span class="sc">!</span><span class="fu">duplicated</span>(data), ]</span>
<span id="cb320-2"><a href="data-manipulation.html#cb320-2" tabindex="-1"></a>clean_data2</span></code></pre></div>
<pre><code>##   Position    Name Age Score
## 1        1   Alice  25    85
## 2        2     Bob  30    90
## 3        3 Charlie  NA    88
## 4        4   David  40    NA
## 5        5     Eva  29    92</code></pre>
<ol start="3" style="list-style-type: decimal">
<li><strong>Handling Outliers</strong>
Outliers are extreme values that differ from most other data points in a data set. hey can be detected by identifying the upper bound and lower bound using boxplots. They are removed by;</li>
</ol>
<pre><code>clean_data &lt;- raw_data[raw_data$column &lt; upper_bound &amp; raw_data$column &gt; lower_bound, ]</code></pre>
<ol start="4" style="list-style-type: decimal">
<li><strong>Standardizing Data</strong><br />
There are numerous ways that data can be standardized such ensuring a consistent date format across the data set and correcting case.</li>
</ol>
<p>Lets create a vector with different date formats and make it consistent</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="data-manipulation.html#cb323-1" tabindex="-1"></a><span class="co"># Creating a vector with different date formats</span></span>
<span id="cb323-2"><a href="data-manipulation.html#cb323-2" tabindex="-1"></a>date_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2023-08-01&quot;</span>, <span class="st">&quot;01/08/2023&quot;</span>, <span class="st">&quot;August 1, 2023&quot;</span>, <span class="st">&quot;20230801&quot;</span>, <span class="st">&quot;08-01-2023&quot;</span>)</span>
<span id="cb323-3"><a href="data-manipulation.html#cb323-3" tabindex="-1"></a></span>
<span id="cb323-4"><a href="data-manipulation.html#cb323-4" tabindex="-1"></a><span class="co"># Converting the date_vector to a consistent format</span></span>
<span id="cb323-5"><a href="data-manipulation.html#cb323-5" tabindex="-1"></a>clean_date_vector <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(date_vector, <span class="at">format=</span><span class="st">&quot;%Y-%m-%d&quot;</span>)</span>
<span id="cb323-6"><a href="data-manipulation.html#cb323-6" tabindex="-1"></a></span>
<span id="cb323-7"><a href="data-manipulation.html#cb323-7" tabindex="-1"></a><span class="co"># Display the clean date vector</span></span>
<span id="cb323-8"><a href="data-manipulation.html#cb323-8" tabindex="-1"></a><span class="fu">print</span>(clean_date_vector)</span></code></pre></div>
<pre><code>## [1] &quot;2023-08-01&quot; NA           NA           NA           &quot;8-01-20&quot;</code></pre>
<p>The <code>lubridate</code> package can do it better</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="data-manipulation.html#cb325-1" tabindex="-1"></a><span class="co"># Load necessary library</span></span>
<span id="cb325-2"><a href="data-manipulation.html#cb325-2" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="data-manipulation.html#cb328-1" tabindex="-1"></a><span class="co"># Correcting each date format using lubridate functions</span></span>
<span id="cb328-2"><a href="data-manipulation.html#cb328-2" tabindex="-1"></a>clean_date_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb328-3"><a href="data-manipulation.html#cb328-3" tabindex="-1"></a>  <span class="fu">as.Date</span>(date_vector[<span class="dv">1</span>], <span class="at">format=</span><span class="st">&quot;%Y-%m-%d&quot;</span>),       <span class="co"># &quot;2023-08-01&quot;</span></span>
<span id="cb328-4"><a href="data-manipulation.html#cb328-4" tabindex="-1"></a>  <span class="fu">as.Date</span>(date_vector[<span class="dv">2</span>], <span class="at">format=</span><span class="st">&quot;%d/%m/%Y&quot;</span>),       <span class="co"># &quot;01/08/2023&quot;</span></span>
<span id="cb328-5"><a href="data-manipulation.html#cb328-5" tabindex="-1"></a>  <span class="fu">as.Date</span>(date_vector[<span class="dv">3</span>], <span class="at">format=</span><span class="st">&quot;%B %d, %Y&quot;</span>),      <span class="co"># &quot;August 1, 2023&quot;</span></span>
<span id="cb328-6"><a href="data-manipulation.html#cb328-6" tabindex="-1"></a>  <span class="fu">as.Date</span>(date_vector[<span class="dv">4</span>], <span class="at">format=</span><span class="st">&quot;%Y%m%d&quot;</span>),         <span class="co"># &quot;20230801&quot;</span></span>
<span id="cb328-7"><a href="data-manipulation.html#cb328-7" tabindex="-1"></a>  <span class="fu">as.Date</span>(date_vector[<span class="dv">5</span>], <span class="at">format=</span><span class="st">&quot;%m-%d-%Y&quot;</span>)        <span class="co"># &quot;08-01-2023&quot;</span></span>
<span id="cb328-8"><a href="data-manipulation.html#cb328-8" tabindex="-1"></a>)</span>
<span id="cb328-9"><a href="data-manipulation.html#cb328-9" tabindex="-1"></a></span>
<span id="cb328-10"><a href="data-manipulation.html#cb328-10" tabindex="-1"></a><span class="co"># Display the clean date vector</span></span>
<span id="cb328-11"><a href="data-manipulation.html#cb328-11" tabindex="-1"></a><span class="fu">print</span>(clean_date_vector)</span></code></pre></div>
<pre><code>## [1] &quot;2023-08-01&quot; &quot;2023-08-01&quot; NA           &quot;2023-08-01&quot; &quot;2023-08-01&quot;</code></pre>
</div>
<div id="hands-on-exercises" class="section level3 hasAnchor" number="4.1.5">
<h3><span class="header-section-number">4.1.5</span> Hands-on Exercises<a href="data-manipulation.html#hands-on-exercises" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
</div>
<div id="data-manipulation-with-dplyr" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Data Manipulation with Dplyr<a href="data-manipulation.html#data-manipulation-with-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="introduction-to-dplyr-package" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Introduction to Dplyr package<a href="data-manipulation.html#introduction-to-dplyr-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Dplyr is a package designed for data manipulation equipped with a set of intuitive functions to perform tasks like filtering rows, selecting columns, rearranging data and summarizing information. The package is part of a larger library, <code>tidyverse</code>. The <strong>tidyverse</strong> package is a package designed for data science that share an underlying design philosophy, grammar and data structures. The packages within the tidyverse are widely used for data manipulation, exploration, and visualization in R. Here are some of the core packages in tidyverse;</p>
<ul>
<li><code>ggplot2</code></li>
<li><code>dplyr</code></li>
<li><code>tidyr</code></li>
<li><code>readr</code></li>
<li><code>purrr</code></li>
<li><code>tibble</code></li>
</ul>
<p>The tidyverse package is installed by</p>
<pre><code>install.packages(&quot;tidyverse&quot;)</code></pre>
<p>To invoke the package into the system, the below command is invoked</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="data-manipulation.html#cb331-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching core tidyverse packages ──────
## ✔ dplyr   1.1.4     ✔ readr   2.1.5
## ✔ forcats 1.0.0     ✔ stringr 1.5.1
## ✔ ggplot2 3.5.1     ✔ tibble  3.2.1
## ✔ purrr   1.0.2     ✔ tidyr   1.3.1
## ── Conflicts ───── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
## ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
<p>In this course, we will discuss on <code>dplyr</code> since it is an essential tool in data analysis. If you want to use dplyr alone then it can be installed by;</p>
<pre><code>install.packages(&quot;dplyr&quot;)</code></pre>
<p>To load the library into the system;</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="data-manipulation.html#cb334-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<p>&lt;<strong>Introduce the dplyr verbs</strong>&gt;</p>
</div>
<div id="hands-on-exercises-1" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Hands-on Exercises<a href="data-manipulation.html#hands-on-exercises-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-importing-and-exporting.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-visualization.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/balsaedi/RCourse/edit/main/04-data_manipulation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/balsaedi/RCourse/blob/main/04-data_manipulation.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
